(this["webpackJsonpphoto-gallery-react"]=this["webpackJsonpphoto-gallery-react"]||[]).push([[0],{33:function(e,t,c){},41:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(26),i=c.n(s),r=(c(33),c(10)),l=c(15),o=c(23),d=c(14);c(42),c(43);d.a.initializeApp({apiKey:"AIzaSyCnAc9cHwoJVZ0venYfLXmWmx5kWCtTPVc",authDomain:"my-photo-studio.firebaseapp.com",projectId:"my-photo-studio",storageBucket:"my-photo-studio.appspot.com",messagingSenderId:"836685755053",appId:"1:836685755053:web:35904c0e0014d1ce434c24",measurementId:"G-GW9DKMRQNG"});var u=d.a.storage(),j=d.a.firestore(),b=d.a.firestore.FieldValue.serverTimestamp,m=function(e){var t=Object(n.useState)([]),c=Object(r.a)(t,2),a=c[0],s=c[1];return Object(n.useEffect)((function(){var t=j.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id}))})),s(t)}));return function(){return t()}}),[e]),{docs:a}},p=c(45),f=c.p+"static/media/deleteIcon.4cf85250.png",O=c(3),g=function(e){var t=e.doc,c=e.setSelectedImg;return Object(O.jsx)("div",{className:"container",id:t.id,children:Object(O.jsxs)(p.a.div,{className:"img-wrap",layout:!0,children:[Object(O.jsx)(p.a.img,{src:t.url,alt:"uploaded-pic",initial:{opacity:0},animate:{opacity:1},onClick:function(){return c(t.url)}}),Object(O.jsx)("div",{className:"delete-btn",children:Object(O.jsx)("img",{src:f,alt:"close",className:"delete-btn-icon"})})]})})},h=function(e){var t=e.setSelectedImg,c=m("images").docs;return Object(O.jsx)("div",{className:"img-grid",children:c&&c.map((function(e){return Object(O.jsx)(g,{doc:e,setSelectedImg:t},e.id)}))})},x=function(e){var t=e.selectedImg,c=e.setSelectedImg;return Object(O.jsx)(p.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&c(null)},initial:{opacity:0},animate:{opacity:1},children:Object(O.jsx)(p.a.img,{src:t,alt:"enlarged-pic",initial:{y:"-100vh"},animate:{y:0}})})},v=function(){return Object(O.jsxs)("div",{className:"title",children:[Object(O.jsx)(l.b,{to:"/",style:{textDecoration:"none"},children:Object(O.jsx)("h1",{children:"My Image Studio"})}),Object(O.jsx)("h2",{children:"Your Pictures"})]})},y=c(22),S=c.n(y),I=c(28),N=function(e){var t=Object(n.useState)(),c=Object(r.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)(null),l=Object(r.a)(i,2),o=l[0],d=l[1],m=Object(n.useState)(null),p=Object(r.a)(m,2),f=p[0],O=p[1];return Object(n.useEffect)((function(){var t=u.ref(e.name),c=j.collection("images");t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;s(t)}),(function(e){d(e)}),Object(I.a)(S.a.mark((function e(){var n,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:n=e.sent,a=b(),c.add({url:n,createdAt:a}),O(n);case 6:case"end":return e.stop()}}),e)}))))}),[e]),{progress:a,url:f,error:o}},k=function(e){var t=e.file,c=e.setFile,a=N(t),s=a.url,i=a.progress;return i||(i=0),Object(n.useEffect)((function(){s&&c(null)}),[s,c]),Object(O.jsx)(p.a.div,{className:"progress-bar",initial:{width:0},animate:{width:i+"%"}})},w=function(){var e=Object(n.useState)(null),t=Object(r.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(null),i=Object(r.a)(s,2),l=i[0],o=i[1],d=["image/png","image/jpeg"],u=function(e){var t=e.target.parentElement.parentElement.parentElement.id,c=j.collection("images").doc(t);c.delete().then((function(){console.log("deleted successfully")})).catch((function(e){return console.log("error",e)})),console.log(c)};return Object(O.jsxs)("form",{children:[Object(O.jsxs)("div",{className:"btns-container",children:[Object(O.jsxs)("label",{children:[Object(O.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&d.includes(t.type)?(o(t),a("")):(o(null),a("Please select an image file (png or jpeg)"))}}),Object(O.jsx)("span",{children:"+"})]}),Object(O.jsx)("label",{onClick:function(){c&&a("");var e=document.getElementById("delete-icon"),t=document.getElementsByClassName("delete-btn");if("-"===e.innerText){e.innerHTML="&#10003";for(var n=0;n<t.length;n++)t[n].style.display="flex",t[n].onclick=u}else{e.innerHTML="-";for(var s=0;s<t.length;s++)t[s].style.display="none"}},children:Object(O.jsx)("span",{id:"delete-icon",children:"-"})})]}),Object(O.jsxs)("div",{className:"output",children:[c&&Object(O.jsx)("div",{className:"error",children:c}),l&&Object(O.jsx)("div",{children:l.name}),l&&Object(O.jsx)(k,{file:l,setFile:o})]})]})};var E=function(){var e=Object(n.useState)(null),t=Object(r.a)(e,2),c=t[0],a=t[1];return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(l.a,{children:Object(O.jsx)(v,{})}),Object(O.jsx)(w,{}),Object(O.jsx)(h,{setSelectedImg:a}),c&&Object(O.jsx)(x,{selectedImg:c,setSelectedImg:a})]})};i.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(E,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.12f26261.chunk.js.map