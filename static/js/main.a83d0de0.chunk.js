(this["webpackJsonpphoto-gallery-react"]=this["webpackJsonpphoto-gallery-react"]||[]).push([[0],{25:function(e,t,c){},29:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(19),i=c.n(s),r=(c(25),c(9)),l=c(16),o=c(12);c(30),c(31);o.a.initializeApp({apiKey:"AIzaSyCnAc9cHwoJVZ0venYfLXmWmx5kWCtTPVc",authDomain:"my-photo-studio.firebaseapp.com",projectId:"my-photo-studio",storageBucket:"my-photo-studio.appspot.com",messagingSenderId:"836685755053",appId:"1:836685755053:web:35904c0e0014d1ce434c24",measurementId:"G-GW9DKMRQNG"});var d=o.a.storage(),u=o.a.firestore(),j=o.a.firestore.FieldValue.serverTimestamp,b=function(e){var t=Object(n.useState)([]),c=Object(r.a)(t,2),a=c[0],s=c[1];return Object(n.useEffect)((function(){var t=u.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(l.a)(Object(l.a)({},e.data()),{},{id:e.id}))})),s(t)}));return function(){return t()}}),[e]),{docs:a}},m=c(33),p=c.p+"static/media/deleteIcon.4cf85250.png",f=c(3),O=function(e){var t=e.doc,c=e.setSelectedImg;return Object(f.jsx)("div",{className:"container",id:t.id,children:Object(f.jsxs)(m.a.div,{className:"img-wrap",layout:!0,children:[Object(f.jsx)(m.a.img,{src:t.url,alt:"uploaded-pic",initial:{opacity:0},animate:{opacity:1},onClick:function(){return c(t.url)}}),Object(f.jsx)("div",{className:"delete-btn",children:Object(f.jsx)("img",{src:p,alt:"close",className:"delete-btn-icon"})})]})})},g=function(e){var t=e.setSelectedImg,c=b("images").docs;return Object(f.jsx)("div",{className:"img-grid",children:c&&c.map((function(e){return Object(f.jsx)(O,{doc:e,setSelectedImg:t},e.id)}))})},h=function(e){var t=e.selectedImg,c=e.setSelectedImg;return Object(f.jsx)(m.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&c(null)},initial:{opacity:0},animate:{opacity:1},children:Object(f.jsx)(m.a.img,{src:t,alt:"enlarged-pic",initial:{y:"-100vh"},animate:{y:0}})})},v=function(){return Object(f.jsxs)("div",{className:"title",children:[Object(f.jsx)("h1",{children:"My Image Studio"}),Object(f.jsx)("h2",{children:"Your Pictures"})]})},x=c(15),y=c.n(x),S=c(20),I=function(e){var t=Object(n.useState)(),c=Object(r.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)(null),l=Object(r.a)(i,2),o=l[0],b=l[1],m=Object(n.useState)(null),p=Object(r.a)(m,2),f=p[0],O=p[1];return Object(n.useEffect)((function(){var t=d.ref(e.name),c=u.collection("images");t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;s(t)}),(function(e){b(e)}),Object(S.a)(y.a.mark((function e(){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:n=e.sent,a=j(),c.add({url:n,createdAt:a}),O(n);case 6:case"end":return e.stop()}}),e)}))))}),[e]),{progress:a,url:f,error:o}},N=function(e){var t=e.file,c=e.setFile,a=I(t),s=a.url,i=a.progress;return i||(i=0),Object(n.useEffect)((function(){s&&c(null)}),[s,c]),Object(f.jsx)(m.a.div,{className:"progress-bar",initial:{width:0},animate:{width:i+"%"}})},k=function(){var e=Object(n.useState)(null),t=Object(r.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(null),i=Object(r.a)(s,2),l=i[0],o=i[1],d=["image/png","image/jpeg"],j=function(e){var t=e.target.parentElement.parentElement.parentElement.id,c=u.collection("images").doc(t);c.delete().then((function(){console.log("deleted successfully")})).catch((function(e){return console.log("error",e)})),console.log(c)};return Object(f.jsxs)("form",{children:[Object(f.jsxs)("div",{className:"btns-container",children:[Object(f.jsxs)("label",{children:[Object(f.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&d.includes(t.type)?(o(t),a("")):(o(null),a("Please select an image file (png or jpeg)"))}}),Object(f.jsx)("span",{children:"+"})]}),Object(f.jsx)("label",{onClick:function(){c&&a("");var e=document.getElementById("delete-icon"),t=document.getElementsByClassName("delete-btn");if("-"===e.innerText){e.innerHTML="&#10003";for(var n=0;n<t.length;n++)t[n].style.display="flex",t[n].onclick=j}else{e.innerHTML="-";for(var s=0;s<t.length;s++)t[s].style.display="none"}},children:Object(f.jsx)("span",{id:"delete-icon",children:"-"})})]}),Object(f.jsxs)("div",{className:"output",children:[c&&Object(f.jsx)("div",{className:"error",children:c}),l&&Object(f.jsx)("div",{children:l.name}),l&&Object(f.jsx)(N,{file:l,setFile:o})]})]})};var w=function(){var e=Object(n.useState)(null),t=Object(r.a)(e,2),c=t[0],a=t[1];return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(v,{}),Object(f.jsx)(k,{}),Object(f.jsx)(g,{setSelectedImg:a}),c&&Object(f.jsx)(h,{selectedImg:c,setSelectedImg:a})]})};i.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(w,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.a83d0de0.chunk.js.map