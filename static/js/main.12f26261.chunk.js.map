{"version":3,"sources":["firebase/config.js","hooks/useFirestore.js","deleteIcon.png","components/Image.js","components/ImageGrid.js","components/Modal.js","components/Title.js","hooks/useStorage.js","components/ProgressBar.js","components/UploadForm.js","App.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","projectStorage","storage","projectFirestore","firestore","timeStamp","FieldValue","serverTimestamp","useFirestore","collection","useState","docs","setDocs","useEffect","unsub","orderBy","onSnapshot","snapshot","documents","forEach","doc","push","data","id","Image","setSelectedImg","className","motion","div","layout","img","src","url","alt","initial","opacity","animate","onClick","deleteIcon","ImageGrid","map","Modal","selectedImg","e","target","classList","contains","y","Title","to","style","textDecoration","useStorage","file","progress","setProgress","error","setError","setUrl","storageRef","ref","name","collectionRef","put","on","percentage","bytesTransferred","totalBytes","err","a","getDownloadURL","createdAt","add","ProgressBar","setFile","width","UploadForm","types","deleteImage","parentElement","docRef","delete","then","console","log","catch","type","onChange","selected","files","includes","document","getElementById","deleteBtns","getElementsByClassName","innerText","innerHTML","i","length","display","onclick","App","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.12f26261.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/storage';\r\nimport 'firebase/firestore';\r\n// Your web app's Firebase configuration\r\n  // For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\n  var firebaseConfig = {\r\n    apiKey: \"AIzaSyCnAc9cHwoJVZ0venYfLXmWmx5kWCtTPVc\",\r\n    authDomain: \"my-photo-studio.firebaseapp.com\",\r\n    projectId: \"my-photo-studio\",\r\n    storageBucket: \"my-photo-studio.appspot.com\",\r\n    messagingSenderId: \"836685755053\",\r\n    appId: \"1:836685755053:web:35904c0e0014d1ce434c24\",\r\n    measurementId: \"G-GW9DKMRQNG\"\r\n  };\r\n  // Initialize Firebase\r\n  firebase.initializeApp(firebaseConfig);\r\n\r\n  const projectStorage = firebase.storage();\r\n  const projectFirestore=firebase.firestore();\r\n  const timeStamp=firebase.firestore.FieldValue.serverTimestamp;\r\n\r\n  export {\r\n      projectFirestore,\r\n      projectStorage,\r\n      timeStamp\r\n  }","import { useState,useEffect } from \"react\";\r\nimport { projectFirestore } from \"../firebase/config\";\r\n\r\nconst useFirestore = (collection) => {\r\n    const [docs, setDocs] = useState([])\r\n    useEffect(()=>{\r\n        const unsub=projectFirestore.collection(collection)\r\n                    .orderBy('createdAt','desc')\r\n                    .onSnapshot((snapshot)=>{\r\n                        let documents=[];\r\n                        snapshot.forEach(doc=>{\r\n                            documents.push({...doc.data(),id:doc.id})\r\n                        });\r\n                        setDocs(documents);\r\n                    })\r\n        return ()=>unsub();\r\n    },[collection])\r\n    return {docs}\r\n}\r\n\r\nexport default useFirestore\r\n","export default __webpack_public_path__ + \"static/media/deleteIcon.4cf85250.png\";","import React from 'react'\r\nimport { motion } from 'framer-motion'\r\nimport deleteIcon from '../deleteIcon.png'\r\n\r\nconst Image = ({doc,setSelectedImg}) => {\r\n    return (\r\n        <div className='container' id={doc.id}>\r\n            <motion.div className=\"img-wrap\"\r\n                    layout\r\n                    >\r\n                    <motion.img src={doc.url} alt=\"uploaded-pic\" \r\n                        initial={{opacity:0}}\r\n                        animate={{opacity:1}}\r\n                        onClick={()=>setSelectedImg(doc.url)}\r\n                    />\r\n                   <div className='delete-btn'>\r\n                        <img src={deleteIcon} alt=\"close\" className='delete-btn-icon'/>\r\n                    </div>\r\n            </motion.div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Image\r\n","import React from 'react'\r\nimport useFirestore from '../hooks/useFirestore'\r\n\r\nimport Image from './Image'\r\n\r\nconst ImageGrid = ({setSelectedImg}) => {\r\n    const {docs}=useFirestore('images')\r\n    return (\r\n        <div className='img-grid'>\r\n            {docs && docs.map(doc=>(\r\n                <Image doc={doc} setSelectedImg={setSelectedImg} key={doc.id} />\r\n            ))}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ImageGrid\r\n","import React from 'react'\r\nimport { motion } from 'framer-motion'\r\nconst Modal = ({selectedImg,setSelectedImg}) => {\r\n    const handleClick=(e)=>{\r\n        if(e.target.classList.contains('backdrop')){\r\n            setSelectedImg(null)\r\n        }\r\n    }\r\n    return (\r\n        <motion.div className='backdrop' onClick={handleClick}\r\n            initial={{opacity:0}}\r\n            animate={{opacity:1}}\r\n        >\r\n            <motion.img src={selectedImg} alt=\"enlarged-pic\" \r\n                initial={{y:\"-100vh\"}}\r\n                animate={{y:0}}\r\n            />\r\n        </motion.div>\r\n    )\r\n}\r\n\r\nexport default Modal","import React from 'react'\r\nimport {Link} from 'react-router-dom'\r\n\r\nconst Title = () => {\r\n    return (\r\n        <div className='title'>\r\n            <Link to='/' style={{textDecoration: 'none'}}>\r\n                <h1>My Image Studio</h1>\r\n            </Link>\r\n            <h2>Your Pictures</h2>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Title\r\n","import { useState,useEffect } from \"react\";\r\nimport { projectStorage,projectFirestore, timeStamp } from \"../firebase/config\";\r\n\r\nconst useStorage=(file)=>{\r\n    const [progress, setProgress] = useState();\r\n    const [error, setError] = useState(null);\r\n    const [url, setUrl] = useState(null);\r\n\r\n    useEffect(()=>{\r\n        //reference\r\n        const storageRef=projectStorage.ref(file.name);\r\n        const collectionRef=projectFirestore.collection('images');\r\n        storageRef.put(file).on('state_changed',(snapshot)=>{\r\n            let percentage=(snapshot.bytesTransferred/snapshot.totalBytes) * 100;\r\n            setProgress(percentage);\r\n        },(err)=>{\r\n            setError(err);\r\n        },async ()=>{\r\n            const url =await storageRef.getDownloadURL();\r\n            const createdAt=timeStamp();\r\n            collectionRef.add({url,createdAt});\r\n            setUrl(url);\r\n        })\r\n    },[file])\r\n\r\n    return {progress,url,error}\r\n}\r\n\r\nexport default useStorage;","import React, { useEffect } from 'react'\r\nimport useStorage from '../hooks/useStorage'\r\nimport { motion } from 'framer-motion';\r\n\r\nconst ProgressBar = ({file,setFile}) => {\r\n    let {url,progress} = useStorage(file);\r\n    \r\n    if(!progress)\r\n        progress=0\r\n\r\n    useEffect(()=>{\r\n        if(url){\r\n            setFile(null)\r\n        }\r\n    },[url,setFile])\r\n\r\n    return (\r\n        <motion.div className='progress-bar'  \r\n        initial={{width:0}}\r\n        animate={{width: progress + '%'}}\r\n        >\r\n            \r\n        </motion.div>\r\n    )\r\n}\r\n\r\nexport default ProgressBar\r\n","import React ,{useState }from 'react'\r\nimport ProgressBar from './ProgressBar'\r\nimport { projectFirestore } from \"../firebase/config\";\r\n\r\nconst UploadForm = () => {\r\n    const [error, setError] = useState(null)\r\n    const [file,setFile]=useState(null)\r\n    const types=['image/png','image/jpeg']\r\n    const changeHandler=(e)=>{\r\n        let selected =e.target.files[0];\r\n        if(selected && types.includes(selected.type)){\r\n            setFile(selected);\r\n            setError('')\r\n        }\r\n        else{\r\n            setFile(null)\r\n            setError('Please select an image file (png or jpeg)')\r\n        }\r\n    }\r\n    const showDeleteBtns=()=>{\r\n        if(error){\r\n            setError('')\r\n        }\r\n        let deleteIcon=document.getElementById('delete-icon')\r\n        const deleteBtns=document.getElementsByClassName('delete-btn');\r\n        if(deleteIcon.innerText==='-')\r\n        {\r\n            deleteIcon.innerHTML='&#10003'\r\n            \r\n            for(let i=0;i<deleteBtns.length;i++)\r\n            {\r\n                deleteBtns[i].style.display='flex'\r\n                deleteBtns[i].onclick=deleteImage\r\n            }\r\n        }else{\r\n            deleteIcon.innerHTML='-'\r\n            for(let i=0;i<deleteBtns.length;i++)\r\n            {\r\n                deleteBtns[i].style.display='none'\r\n            }\r\n        }\r\n    }\r\n\r\n    const deleteImage=(e)=>{\r\n        let container=e.target.parentElement.parentElement.parentElement\r\n        let id=container.id\r\n        const docRef=projectFirestore.collection('images').doc(id)\r\n        docRef.delete().then(()=>{\r\n            console.log('deleted successfully')\r\n        }).catch((error)=>console.log('error',error))\r\n        console.log(docRef)\r\n    }\r\n\r\n    return (\r\n        <form>\r\n            <div className='btns-container'>\r\n                <label>\r\n                    <input type=\"file\" onChange={changeHandler} />\r\n                    <span>+</span>\r\n                </label>\r\n                <label onClick={showDeleteBtns}>\r\n                    <span id='delete-icon'>-</span>\r\n                </label>\r\n            </div>\r\n            <div className=\"output\">\r\n                {error && <div className='error'>{error}</div>}\r\n                {file && <div>{file.name}</div>}\r\n                {file && <ProgressBar file={file} setFile={setFile}/>}\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default UploadForm\r\n","import React, { useState } from 'react'\nimport {BrowserRouter as Router} from 'react-router-dom'\nimport ImageGrid from './components/ImageGrid'\nimport Modal from './components/Modal'\nimport Title from './components/Title'\nimport UploadForm from './components/UploadForm'\nfunction App() {\n  const [selectedImg,setSelectedImg]=useState(null)\n  return (\n    <div className=\"App\">\n      <Router>\n        <Title/>\n      </Router>\n      <UploadForm/>\n      <ImageGrid setSelectedImg={setSelectedImg}/>\n      {selectedImg && <Modal selectedImg={selectedImg} setSelectedImg={setSelectedImg}/>}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}